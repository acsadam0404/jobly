<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:sec="http://www.springframework.org/security/tags">
	<f:facet name="last">
		<h:outputStylesheet library="css" name="fragments/_layout_header.css" />
	</f:facet>
	<h:form id="menuForm" prependId="false">
		<p:menubar id="menubar">
			<p:menuitem value="" icon="homeLinkDiv" styleClass="homeLink" url="/index.xhtml" />

			<p:menuitem value="Hirdetés feladása" url="/postad.xhtml" />

			<f:facet name="options">
				<!-- 				AUTHENTIKÁCIÓVAL -->
				<sec:authorize ifAnyGranted="USER_ROLE">
					<p:graphicImage id="scheduleLink" library="img" name="scheduleLink.png" style="cursor:pointer" title="Naptár" />
					<p:overlayPanel id="schedulePanel" for="scheduleLink" hideEffect="fade" appendToBody="true" style="width: 600px; height: 500px;">
						<h:panelGroup layout="block">
							<p:schedule id="menuSchedule" value="#{scheduleBean.eventModel}" widgetVar="myschedule" locale="hu">
							</p:schedule>
						</h:panelGroup>
					</p:overlayPanel>


					<p:commandButton id="accountLink" value="#{userBean.user.profile.lastName} #{userBean.user.profile.firstName}" />
					<p:overlayPanel id="accountPanel" for="accountLink" hideEffect="fade">
						<h:link value="Profil" outcome="/profile" />
						<sec:authorize ifAnyGranted="ADMIN_ROLE">
							<h:link value="Admin" outcome="/admin/index" />
						</sec:authorize>
						<p:commandLink value="Kilépés" action="#{userSessionBean.doLogout()}" ajax="false" />
					</p:overlayPanel>
					<h:graphicImage id="profileImage" value="#{userBean.user.profile.profileImagePath}" />
				</sec:authorize>

				<!-- 				AUTHENTIKÁCIÓ NÉLKÜL -->
				<sec:authorize ifNotGranted="USER_ROLE">
					<p:commandButton id="registrationLink" value="Regisztráció" />
					<p:overlayPanel id="registrationPanel" for="registrationLink" hideEffect="fade">
						<ui:include src="registration.xhtml" />
					</p:overlayPanel>
					<p:commandButton id="loginLink" value="Bejelentkezés" />
					<p:overlayPanel id="loginPanel" for="loginLink" hideEffect="fade">
						<ui:include src="_layout_header_login.xhtml" />
					</p:overlayPanel>
				</sec:authorize>
			</f:facet>
		</p:menubar>

		<p:sticky target="menubar" />
	</h:form>
</ui:composition>
