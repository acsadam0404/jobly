<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui">
	<f:view>
		<ui:param name="originalURL" value="#{request.requestURI}?#{request.queryString}" />

		<f:metadata>
			<f:event rendered="#{empty userSessionBean.profile}" type="preRenderView" listener="#{userSessionBean.setOriginalURL(originalURL)}" />
		</f:metadata>
	</f:view>
	<f:facet name="last">
		<h:outputStylesheet library="css" name="styles.css" />
		<h:outputStylesheet library="css" name="fragments/info/registration.css" />
	</f:facet>
	<h:form id="registrationForm">
		<h:panelGroup id="registrationFormPanel">
			<h:panelGrid columns="1">
				<p:inputText id="realName" maxlength="30" value="#{registrationBean.user.profile.realName}" styleClass="icon-input registration-input" />
				<p:inputText id="email" maxlength="60" value="#{registrationBean.user.userName}"  styleClass="icon-input email-input"/>
				<p:password id="pwd1" value="#{registrationBean.user.password}" maxlength="20" match="pwd2" required="true" validatorMessage="A jelszavaknak egyezniük kell"  styleClass="icon-input password-input"/>
				<p:password id="pwd2" value="#{registrationBean.user.password}" maxlength="30" name="pwd2" required="true"  styleClass="icon-input password-input" />
				<p:inputText id="address" maxlength="4" value="#{registrationBean.user.address.zipcode}"  styleClass="icon-input address-input"/>
				<p:commandLink action="#{registrationBean.register()}" ajax="false">
					<p:graphicImage id="createProfile" library="img" name="registration/reg.png" style="cursor:pointer" title="Profil létrehozása" />
				</p:commandLink>
				<span class="registration-conditions">A regisztrációval beleegyezik, hogy elfogadja a <h:link outcome="/conditions" value="Felhasználói feltételeket" /> és <h:link outcome="/privacy" value="Adatvédelmet" />.
				</span>
				<h:outputText value="vagy" />
				<p:commandLink id="facebook" action="#{userSessionBean.socialConnect}">
					<f:setPropertyActionListener target="#{userSessionBean.providerID}" value="facebook" />
					<p:graphicImage id="facebookReg" library="img" name="registration/faceb_reg.png" style="cursor:pointer" title="Regisztrálj Facebookkal" />
				</p:commandLink>
			</h:panelGrid>
			<p:watermark for="pwd2" value="Jelszó ismét" />
			<p:watermark for="pwd1" value="Jelszó" />
			<p:watermark for="email" value="E-mail cím" />
			<p:watermark for="realName" value="Teljes név" />
			<p:watermark for="address" value="Irányítószám" />
		</h:panelGroup>
	</h:form>

</ui:composition>